{% extends "base.html" %}

{% block content %}
<div style="height: calc(100vh - 80px); display: flex;">
    <!-- Sidebar for Suggestions -->
    <div
        style="width: 350px; background: #1a1a2e; border-right: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; overflow-y: auto;">
        <div style="padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <a href="/trip/{{ trip.id }}"
                style="color: #6C63FF; text-decoration: none; display: inline-flex; align-items: center; margin-bottom: 15px;">
                ‚Üê Back to Trip
            </a>
            <h2 style="margin: 0;">{{ trip.destination }}</h2>
            <p style="color: #888; margin: 5px 0 0 0;">Interactive Map & Guide</p>
        </div>

        <!-- Hotels -->
        <div style="padding: 20px;">
            <h3 style="color: #00C9FF; margin-top: 0;">üè® Top Stays</h3>
            {% if recommendations and recommendations.hotels %}
            {% for hotel in recommendations.hotels %}
            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <h4 style="margin: 0;">{{ hotel.name }}</h4>
                    <span
                        style="background: #FFC06C; color: black; padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 0.8rem;">{{
                        hotel.rating }} ‚òÖ</span>
                </div>
                <p style="color: #ccc; font-size: 0.9rem; margin: 0 0 5px 0;">Price: {{ hotel.price }}</p>
                <p style="color: #888; font-size: 0.85rem; font-style: italic; margin: 0;">"{{ hotel.sentiment }}"</p>
            </div>
            {% endfor %}
            {% else %}
            <p style="color: #666;">No hotel suggestions available.</p>
            {% endif %}
        </div>

        <!-- Restaurants -->
        <div style="padding: 0 20px 20px 20px;">
            <h3 style="color: #FF6B9D; margin-top: 0;">üçΩÔ∏è Top Eats</h3>
            {% if recommendations and recommendations.restaurants %}
            {% for place in recommendations.restaurants %}
            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <h4 style="margin: 0;">{{ place.name }}</h4>
                    <span
                        style="background: #FFC06C; color: black; padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 0.8rem;">{{
                        place.rating }} ‚òÖ</span>
                </div>
                <p style="color: #ccc; font-size: 0.9rem; margin: 0 0 5px 0;">Cuisine: {{ place.cuisine }}</p>
                <p style="color: #888; font-size: 0.85rem; font-style: italic; margin: 0;">"{{ place.sentiment }}"</p>
            </div>
            {% endfor %}
            {% else %}
            <p style="color: #666;">No restaurant suggestions available.</p>
            {% endif %}
        </div>

        <!-- Attractions -->
        <div style="padding: 0 20px 20px 20px;">
            <h3 style="color: #92FE9D; margin-top: 0;">Attractions</h3>
            {% if recommendations and recommendations.attractions %}
            {% for place in recommendations.attractions %}
            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <h4 style="margin: 0;">{{ place.name }}</h4>
                </div>
                <p style="color: #ccc; font-size: 0.9rem; margin: 0 0 5px 0;">Type: {{ place.type }}</p>
                <p style="color: #888; font-size: 0.85rem; font-style: italic; margin: 0;">"{{ place.sentiment }}"</p>
            </div>
            {% endfor %}
            {% else %}
            <p style="color: #666;">No attraction suggestions available.</p>
            {% endif %}
        </div>
    </div>

    <!-- Map Container -->
    <div style="flex: 1; position: relative;">
        {{ map_html | safe }}

        <!-- Places Toggle Overlay (Optional Enhancement) -->
        <div
            style="position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 12px; backdrop-filter: blur(10px); z-index: 999;">
            <p style="margin: 0 0 10px 0; font-weight: bold;">Legend</p>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; font-size: 0.8rem;">
                <span style="color: red;">üö© Destination</span>
                <span style="color: green;">‚ñ∂Ô∏è Start</span>
                <span style="color: blue;">‚ûñ Route</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}